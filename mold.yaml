version: "0.3.0"

includes:
  - url: "https://github.com/xtfc/std.mold"

recipes:
  build:
    help: "Build using cargo"
    command: ["cargo", "build"]
  check:
    help: "Check for errors using cargo"
    command: ["cargo", "check"]
    deps:
    - clean-self
  clean:
    help: "Clean build artifacts"
    command: ["cargo", "clean"]
  clean-self:
    help: "Only clean current package"
    type: "sh"
    script: |
      cargo clean -p $(cargo pkgid)
  fmt:
    help: "Format using rustfmt"
    command: ["cargo", "fmt"]
  fmtcheck:
    help: "Check formatting using rustfmt"
    command: ["cargo", "fmt", "--", "--check"]
  install:
    help: "Install the current project using cargo"
    command: ["cargo", "install", "--force", "--path", "."]
  lint:
    help: "Lint using clippy"
    command: ["cargo", "clippy", "--", "-D", "warnings"]
    deps:
    - clean-self
  test:
    help: "Run tests using cargo"
    command: ["cargo", "test"]
